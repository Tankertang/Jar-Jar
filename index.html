<html>
    <head>
        <script src="https://www.gstatic.com/firebasejs/7.8.2/firebase-app.js"></script>
        <script src="https://www.gstatic.com/firebasejs/7.8.2/firebase-auth.js"></script>
        <script src="https://www.gstatic.com/firebasejs/7.8.2/firebase-firestore.js"></script>
        <script src="https://www.gstatic.com/firebasejs/7.8.2/firebase-analytics.js"></script>
        
        <style>
            body {
                background: rgb(250, 249, 249);
            }
        </style>
    </head>
    <body>
        <h1>Ghost Hunter!!</h1>
        <div id="play-page" class="">
            <p>Username:
                <input id = "username" type = "text"/>
            </p>
            <p>
                <button onclick='start();'>Play Now!</button>
            </p>
        </div>
        

        <canvas id="PlayZone" width= "600" height = "600" style="border:2px solid black" ></canvas>
        <img id= "ghost" src = "https://pngimg.com/uploads/ghost/ghost_PNG81.png" width="20px" height="20px" alt="Seeker">
        <img id= "hunter" src = "https://tse1.mm.bing.net/th?id=OIP.9dqPj_o8pAZMySoibk-LQQHaRY&pid=Api&P=0&w=300&h=300" width="20px" height="20px" alt="Destroyer">

       <script>
      </script>

        <script>
            var firebaseConfig = {
                apiKey: "AIzaSyB6tUD-ar7ENW8y3vh5Y-HPmpICCxrEwe8",
                authDomain: "javawebsite-ab223.firebaseapp.com",
                databaseURL: "https://javawebsite-ab223.firebaseio.com",
                projectId: "javawebsite-ab223",
                storageBucket: "javawebsite-ab223.appspot.com",
                messagingSenderId: "372498914074",
                appId: "1:372498914074:web:b4687c7c7dbae9b9e0eaa3",
                measurementId: "G-SJEERR0S09"
            };
            // Initialize Firebase
            firebase.initializeApp(firebaseConfig);
            firebase.analytics();

            //sets role of player as hunter or ghost
            let position = Math.random() 
            if (position > 0.5) {
                    position = "hunter";
                } else {
                    position = "ghost";
                }
            let user;
            let enemy;
            var lastX = 180;
            var lastY = 180;

            function canvas() {
                var c = document.getElementById("PlayZone");
                var ctx = c.getContext("2d");

                if (position == 'ghost') {
                    var img = document.getElementById("ghost");
                    var enemyImg = document.getElementById('hunter');
                } else {
                    var img = document.getElementById("hunter");
                    var enemyImg = document.getElementById('ghost');
                }
<<<<<<< HEAD


=======
                var lastX = 180;
                var lastY = 180;
>>>>>>> 714184f2abf5b8a1046f87151f77d9db21bd7bcc
                var width = 40;
                var height = 40;
                var rightBorder = canvas.width - img.width;

<<<<<<< HEAD
               
                ctx.drawImage(img, lastX, lastY, width, height);
<<<<<<< HEAD

                //enemy information and drawing
                firebase.firestore().collection('Players').doc('20').get().then(function(doc) {
                    if (doc.exists) {
                        console.log(doc.data());
                        enemy = doc.data();
                        ctx.drawImage(enemyImg, enemy.xPos, enemy.yPos, width, height);
                    } else {
                        console.log("no such doc");
                    }
                }).catch(function(error) {
                    console.log("error getting doc:", error);
                });
                

                function moveUp(amount) {
                    ctx.clearRect(0, 0, c.width, c.height);
                    ctx.drawImage(img, lastX, lastY - amount, width, height);
                    firebase.firestore().collection('Players').doc('20').get().then(function(doc) {
                    if (doc.exists) {
                        console.log(doc.data());
                        enemy = doc.data();
                        ctx.drawImage(enemyImg, enemy.xPos, enemy.yPos, width, height);
                    } else {
                        console.log("no such doc");
                    }
                }).catch(function(error) {
                    console.log("error getting doc:", error);
                });
                    lastY = lastY - amount
                    firebase.firestore().collection('Players').doc(user).update({
                        'yPos': lastY
                    })
=======
=======
                ctx.drawImage(img, lastX, lastY, width, height
                
                }
>>>>>>> f62bb52d08af0f667bca6049fe9f187d859c57d2
                //goes up 1
                function moveUp(amount) {
                    if (lastY > 0) {
                        ctx.clearRect(0, 0, c.width, c.height);
                        ctx.drawImage(img, lastX, lastY - amount, width, height);
                        lastY = lastY - amount;
                    }
>>>>>>> 714184f2abf5b8a1046f87151f77d9db21bd7bcc
                }
                //goes down 1
                function moveDown(amount) {
                    console.log(lastY);
                   if (lastY < 550) {
                    ctx.clearRect(0, 0, c.width, c.height);
                    ctx.drawImage(img, lastX, lastY + amount, width, height);
                    firebase.firestore().collection('Players').doc('20').get().then(function(doc) {
                    if (doc.exists) {
                        console.log(doc.data());
                        enemy = doc.data();
                        ctx.drawImage(enemyImg, enemy.xPos, enemy.yPos, width, height);
                    } else {
                        console.log("no such doc");
                    }
                }).catch(function(error) {
                    console.log("error getting doc:", error);
                });
                    lastY = lastY + amount;
<<<<<<< HEAD
                    firebase.firestore().collection('Players').doc(user).update({
                        'yPos': lastY
                    })
=======
                   }
>>>>>>> 714184f2abf5b8a1046f87151f77d9db21bd7bcc
                }
                //goes left 1
                function moveLeft(amount) {
                    if(lastX > 0 ){
                    ctx.clearRect(0, 0, c.width, c.height);
                    ctx.drawImage(img, lastX - amount, lastY, width, height);
                    firebase.firestore().collection('Players').doc('20').get().then(function(doc) {
                    if (doc.exists) {
                        console.log(doc.data());
                        enemy = doc.data();
                        ctx.drawImage(enemyImg, enemy.xPos, enemy.yPos, width, height);
                    } else {
                        console.log("no such doc");
                    }
                }).catch(function(error) {
                    console.log("error getting doc:", error);
                });
                    lastX = lastX - amount
<<<<<<< HEAD
                    firebase.firestore().collection('Players').doc(user).update({
                        'xPos': lastX
                    })
=======
                    }
>>>>>>> 714184f2abf5b8a1046f87151f77d9db21bd7bcc
                }
                //goes right 1
                function moveRight(amount) {
                    if (lastX < 550 ){
                    ctx.clearRect(0, 0, c.width, c.height);
                    ctx.drawImage(img, lastX + amount, lastY, width, height);
                    firebase.firestore().collection('Players').doc('20').get().then(function(doc) {
                    if (doc.exists) {
                        console.log(doc.data());
                        enemy = doc.data();
                        ctx.drawImage(enemyImg, enemy.xPos, enemy.yPos, width, height);
                    } else {
                        console.log("no such doc");
                    }
                }).catch(function(error) {
                    console.log("error getting doc:", error);
                });
                    lastX = lastX + amount;
<<<<<<< HEAD
                    firebase.firestore().collection('Players').doc(user).update({
                        'xPos': lastX
                    })
=======
                    }
>>>>>>> 714184f2abf5b8a1046f87151f77d9db21bd7bcc
                }

                document.addEventListener("keydown", function (event) {
                    if (event.keyCode === 87 && lastX>0) {
                        moveUp(10);
                    } else if (event.keyCode === 83){
                        moveDown(10);
                    } else if (event.keyCode === 65){
                        moveLeft(10);
                    } else if (event.keyCode === 68){
                        moveRight(10);
                    }
                }, false);
            }

            function start() {
                user = document.getElementById('username').value; 

                firebase.firestore().collection('Players').doc(user).set({
                    username: user,
                    position: position,
                    xPos: lastX,
                    yPos: lastY,
                })

                document.getElementById('play-page').innerHTML = 'Welcome ' + user + '! You are a ' + position + '!';
                canvas();
            };

            
        </script>
    </body>
</html>                  
